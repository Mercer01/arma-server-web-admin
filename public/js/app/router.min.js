define(function(j){var d=j("jquery"),a=j("backbone"),q=j("app/views/layout"),l=j("app/views/navigation"),k=j("app/views/servers/list"),o=j("app/views/logs/list"),t=j("app/views/missions/index"),n=j("app/views/mods/list"),e=j("app/views/servers/view"),i=j("app/collections/logs"),h=j("app/collections/missions"),m=j("app/collections/mods"),u=j("app/models/settings"),b=j("app/collections/servers"),r=d("body"),g=new h(),c=new m(),s=new u(),p=new b(),f=new q({el:r}).render();return a.Router.extend({routes:{logs:"logs",missions:"missions",mods:"mods","servers/:id":"server","":"home"},initialize:function(){f.navigation.show(new l({settings:s,servers:p}));var w=false;var v=io.connect();v.on("missions",function(x){g.set(x)});v.on("mods",function(x){c.set(x)});v.on("servers",function(x){p.set(x);if(!w){w=true;a.history.start()}});v.on("settings",function(x){s.set(x)})},home:function(){f.content.show(new k({collection:p}))},logs:function(){var v=new i();v.fetch();f.content.show(new o({collection:v}))},missions:function(){f.content.show(new t({missions:g}))},mods:function(){f.content.show(new n({collection:c}))},server:function(w){var v=p.get(w);if(v){f.content.show(new e({model:v,missions:g,mods:c}))}else{this.navigate("#",true)}}})});