define(function(b){var d=b("jquery"),i=b("underscore"),h=b("backbone"),f=b("marionette"),c=b("app/collections/mission_rotations"),a=b("app/views/servers/missions/available/list"),g=b("app/views/servers/missions/rotation/list"),e=b("text!tpl/servers/missions/index.html");return f.LayoutView.extend({template:i.template(e),regions:{availableView:"#available",rotationView:"#rotation"},modelEvents:{change:"serverUpdated"},initialize:function(k){this.missions=k.missions;this.rotationCollection=new c(this.model.get("missions"));var j=this;this.availableListView=new a({collection:this.missions});this.availableListView.on("add",function(l){j.rotationCollection.add([{name:l.get("name").replace(".pbo","")}])});this.rotationListView=new g({collection:this.rotationCollection})},onRender:function(){this.availableView.show(this.availableListView);this.rotationView.show(this.rotationListView)},serverUpdated:function(){this.rotationCollection.set(this.model.get("missions"))},serialize:function(){return{missions:this.rotationCollection.toJSON()}}})});